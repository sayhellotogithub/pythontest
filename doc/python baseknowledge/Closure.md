**クロージャ（Closure）** は、関数型プログラミングにおける重要な概念で、Pythonでもよく使われます。簡単に言うと、**関数とその関数が参照している変数をひとまとめにしたもの**です。

クロージャは、内部関数が外部関数の変数にアクセスできる状態を作ることができます。これによって、外部関数のローカル変数を保持しながら、内部関数を返すことができます。

------

### **クロージャの基本的な仕組み**

1. **外部関数（親関数）** が定義され、その内部で **内部関数** が定義される。
2. **内部関数** は外部関数の引数や変数にアクセスできる。
3. **外部関数** が **内部関数** を返すと、内部関数は外部関数の変数を参照することができる状態が作られ、これがクロージャとなる。

------

### **クロージャの例**

```
def outer_function(outer_variable):
    # 外部関数で定義された変数
    def inner_function(inner_variable):
        # 内部関数
        return outer_variable + inner_variable
    return inner_function  # 内部関数を返す

# outer_functionが返す内部関数を変数に代入
closure_function = outer_function(10)

# クロージャが外部関数の変数にアクセス
result = closure_function(5)  # 10 + 5 = 15
print(result)  # 15
```

### **説明**

- `outer_function` が引数 `outer_variable` を受け取ります。
- `inner_function` は、`outer_variable` にアクセスできますが、`outer_function` を実行すると外部関数は終了します。
- しかし、`outer_function` が `inner_function` を返すと、`inner_function` は依然として `outer_variable` にアクセスできる状態になります。これがクロージャです。

------

### **クロージャの特徴**

1. **状態の保持**：外部関数の状態（変数）を内部関数で保持できます。これを「閉じ込められた環境」とも呼びます。
2. **動的な関数の生成**：外部関数を何度も呼び出して異なる引数を渡すと、毎回異なるクロージャが生成されます。
3. **データの隠蔽**：クロージャを使うと、外部からアクセスできない変数を内部で保持し、外部には公開しないことができます。

------

### **クロージャの活用例**

1. **状態を保持する**： クロージャを使って関数内で変数を保持し、状態を変更することができます。例えば、カウンタの実装などで使います。

```
def counter():
    count = 0
    def increment():
        nonlocal count  # 外部のcount変数を参照
        count += 1
        return count
    return increment

counter_function = counter()
print(counter_function())  # 1
print(counter_function())  # 2
print(counter_function())  # 3
```

1. **データ隠蔽**： クロージャを使って、関数内の状態を隠蔽し、外部からの変更を防ぐことができます。

------

### **クロージャのメリット**

- **関数内での状態保持**ができる。
- **状態のカプセル化**が可能なので、外部から不正にデータを変更されない。
- 複雑なロジックをシンプルに保ちながら、**動的な関数の作成**が可能。

------

### **まとめ**

- クロージャは、内部関数が外部関数の変数を参照できる状態を作り出す仕組みです。
- 関数を返す外部関数と、返された関数（クロージャ）は、密接に関連しており、外部関数の変数を保持し続けることができます。
- クロージャを活用することで、状態管理やデータ隠蔽を効果的に行うことができます。